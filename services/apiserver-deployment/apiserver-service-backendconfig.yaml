kind: BackendConfig
apiVersion: cloud.google.com/v1
metadata:
  name: apiserver-service-backendconfig
  namespace: default
spec:
  # A backendconfig allows us to configure how a load balancer talks to a service.
  healthCheck:
    # The default / returns a 301, so don't use that.
    requestPath: "/k8s/livenessProbe"
    type: HTTP
    port: 30002 # the nodeport from apiserver-service
    # Host is not allowed here, but it has been manually set on this healthcheck so
    # that the server can recognize this is a healthcheck and not a granduser request
    # host: gce-ingress-healthcheck
  logging:
    # Changing this setting didn't seem to do anything - I needed to Edit it in the
    # GCP web console (or presumably using the gcloud command line utilily)
    # Note that only a change is status is logged.
    enable: false
