k8s:
  manually-deployed-config:
    configs: []

    custom-diff:
      - kubectl create configmap honeycomb-agent
          --from-file=config.yaml=services/honeycomb-agent/honeycomb-agent-config.yaml
          --dry-run=client -o json
          | kubectl diff -f -

    # TODO: Should this end in `kubectl rollout restart ds/honeycomb-agent` instead?
    custom-apply:
      - kubectl create configmap honeycomb-agent
          --from-file=config.yaml=services/honeycomb-agent/honeycomb-agent-config.yaml
          --dry-run=client -o json
          | kubectl replace --filename=-
      - kubectl delete pod --selector k8s-app=honeycomb-agent
